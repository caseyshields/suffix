<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>suffix trie</title>
        <style>
            circle {
                fill:none;
                stroke: black;
            }
        </style>
        <script src="suffixtrie.js"></script>
        <script src="https://d3js.org/d3.v5.js"></script>
    </head>
    <body>
        <h1>Suffix Trie</h1>
        <svg id='main'>
        </svg>
    <script>
        let dimensions = [1000, 1000];

        let word = 'mississippi';
        let strie = CreateSuffixTrie();
        for (let c of word)
            strie.append( c );

        console.log( strie.root() );

        let svg = d3.select('svg#main');
        let nodes = svg.append( 'g' )
            .attr('class', 'trie')
            .selectAll('.nodes');

        let hierarchy = d3.hierarchy( strie.root() );
        // console.log( hierarchy.descendants() );

        let layout = d3.tree()
            .size( dimensions );
        
        layout( hierarchy );

        nodes = nodes.data( hierarchy.descendants() );
        let s = nodes.enter()
            .append( 'g' )
            .attr('class', 'node');

        s.append( 'circle' )
            .attr( 'r', 10 );

        s.append( 'text' )
            .text( d => d.data.name );

        nodes = s.merge( nodes )
            .attr( 'transform', function(d) {return 'translate('+d.x+', '+d.y+')';} );

    </script>
    </body>
</html>